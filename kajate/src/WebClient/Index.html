<!DOCTYPE html>
<html>
    <head>
        <title>Kajate | MES</title>
        <link rel="stylesheet" href="stylesheets/variables.css">
        <link rel="stylesheet" href="stylesheets/style.css">
    </head>
    <body>
        <!--TOP HEADER-->
        <header>
            <div class="wrapper">
                <p id="dateTime">12:45 30-10-2020</p>
                <div id="searchField">
                    <input type="text" placeholder="Search batch products...">
                    <button type="submit">Search</button>
                </div>
            </div>
        </header>
        <div class="wrapper">
            <!--SIDEBAR-->
            <aside class="flex-size-1 flexDirectionColumn">
                <div class="flexCenterMultipleRows" id="logoContainer">
                    <img src="./images/logo-web.png">
                </div>
                <nav>
                    <ul>
                        <li><a href="#">Production Dashboard</a></li>
                        <li><a href="#">Batch report</a></li>
                        <li><a href="#">Statistical Analysis</a></li>
                        <li><a href="#">Database Contents</a></li>
                        <li><a href="#">Check Servers</a></li>
                    </ul>
                </nav>
            </aside>
            <!--DASHBOARD BOXES-->
            <div class="flex-size-2 flexDirectionColumn">
                <div class="flexDirectionRow flexSpaceBetween flexWrap">
                    <form class="flex-size-1 containerBox" id="formCreateBatch" action="http://localhost:3000/form_data" method="post" target="_blank">
                        <h2 class="flexCenterSingleRow">Create Batch</h2>
                        <label>Batch ID:</label><br>
                        <input name="tfBatchId" type="text" id="tfBatchId" disabled>
                        <input type="radio" id="autoBatchId" name="auto" value="auto">
                        <label for="auto">Auto</label><br><br>
                        <label>Product Type:</label><br>
                        <select id="productType" name="productType">
                            <option value="Pilsner">Pilsner</option>
                            <option value="Wheat">Wheat</option>
                            <option value="IPA">IPA</option>
                            <option value="Stout">Stout</option>
                            <option value="Ale">Ale</option>
                            <option value="Alcohol-free">Alcohol-free</option>
                        </select><br><br>
                        <label>Amount:</label><br>
                        <input name="tfProductAmount" type="text" id="tfProductAmount"><br><br>                                           
                        <label>Machine Speed:</label> <br>
                        <input name="tfMachineSpeed" type="text" id="tfMachineSpeed" disabled>            
                        <input type="radio" id="autoMachineSpeed" name="auto" value="auto">
                        <label for="auto">Auto</label>
                        <span class="flexCenterSingleRow"><input class="buttonDefault" type="submit" id="btnStart" value="Start"></span>
                    </form>
                    <div class="flex-size-2 containerBox" id="report">
                        <h2 class="flexCenterSingleRow">Current Batch Report</h2>
                        <div class="innerContentBox">
                            <li>Batch id: <span id="spanBatchId"> 0 </span></li>
                            <li>Beer type: <span id="spanProductId"> 0 </span> </li>
                            <li>Amount to produce: <span id="spanAmountId">0</li> </span></li>
                            <li>Defect products: <span id="spanDefectID">0</li> </span></li>
                            <li>Acceptable products: <span id="spanAcceptableId">0</li> </span></li>
                            <li>Total production time: <span id="spanProductionTimeId">0</li> </span></li>
                            <li>Estimated temperature: <span id="spanEstimatedTemperatureId">0</li> </span></li>
                            <li>Estimated Humidity: <span id="spanEstimatedHumiditytId">0</li> </span></li>
                            <li>Overall Equipment Effectiveness: <span id="spanEquipmentId">0</li> </span></li>
                            <li>Machine speed: <span id="spanSpeedId"> 0 </span></li>
                            <li>Produced: <span id="spanProducedId"> 0 </span></li>
                        </div>
                        <span class="flexCenterSingleRow"><input class="buttonDefault" type="submit" id="btnSave" value="Save As PDF"></span>
                    </div>
                </div>
                <!-- REALTIME VISUALIZATION BOXES -->
                <div class="containerBox" id="realtimeVisualization">
                    <h2 class="flexCenterSingleRow">Real-time Visualization</h2>
                    <div class="flexCenterMultipleRows flexSpaceAround flexWrap">
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Temperature</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Batch ID</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Produced</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Humidity</h3><br>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Amount To Produce</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Acceptable Products</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Vibration</h3><br>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Products Per Minute</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                        <div class="flexDirectionRow flexCenterSingleRow flexSpaceBetween" id="rtvBox">
                            <div class="flexDirectionColumn flexCenterSingleRow">
                                <img src="#">
                                <h3>Defect Products</h3>
                            </div>
                            <p>0.0</p>
                        </div>
                    </div>       
                    <div class="flexCenterSingleRow">
                        <button class="buttonDefault">Stop</button>
                        <button class="buttonDefault">Reset</button>
                        <button class="buttonDefault">Clear</button>
                        <button class="buttonDefault">Abort</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- FOOTER -->
        <footer>
            <div class="wrapper">
                <p>User interface developed by group 5: <br> Jonas Svane, Arem Dogan, Emma Johanne Bovtrup, Andreas Schmidtm Tumpebjerg <br>
                    Karthikan Vimalarasan, Wahid Tobias Winberg Razzaghi</p>
            </div>
        </footer>
        <!-- SCRIPT -->
        <script>
            function poll(){
                fetch("http://localhost:3000/opcua_data")
                .then(response => response.json())
                .then(json => { 
                    document.getElementById("spanBatchId").innerText = document.getElementById("tfBatchID").value;
                    document.getElementById("spanProductId").innerText = document.getElementById("tfProductType").value;
                    document.getElementById("spanAmountId").innerText = document.getElementById("tfProductAmount").value;
                    document.getElementById("spanSpeedId").innerText = document.getElementById("tfMachineSpeed").value;
                    document.getElementById("spanProducedId").innerText = json.produced;
                })
                .then(() => setTimeout(poll(), 500))
                .catch(err => console.log(err));
            }
        
            document.getElementById("btnStart").addEventListener("click", () => {
                setTimeout(() => {
                    poll();
                }, 5000);
            });
        </script>
    </body>
</html>

